# gRPC

- Google 개발
- 오픈소스 프로젝트로 관리되는 원격 프로시저 호출(RPC) 프레임워크
- 원격 프로시저 호출(RPC)이란, 네트워크를 통해 다른 컴퓨터 프로그램에 위치한 프로시저(또는 함수)를 로컬에서 호출하는 것



## 특징

```java
1. **프로토콜 버퍼** (Protocol Buffers 또는 ProtoBuf)
: 데이터 직렬화 도구 (for gRPC는 데이터 구조를 정의) 
ProtoBuf는 데이터를 효과적으로 압축하고, 전송하고, 직렬화/역직렬화 할 수 있는 바이너리 포맷 제공

2. **언어 중립**
: gRPC는 다양한 프로그래밍 언어에서 사용. 
서로 다른 언어로 작성된 서비스 간에도 통신이 가능.

3. **스트리밍**
: gRPC는 클라이언트-서버, 서버-클라이언트, 양방향 스트리밍을 지원.

4. **단일 연결**
: gRPC는 HTTP/2를 기반으로 하며, 여러 요청을 단일 TCP 연결에서 동시에 전송.

5. **데드라인/타임아웃**
: gRPC 호출은 데드라인 또는 타임아웃을 가질 수 있어, 요청이 너무 오래 걸리는 경우 자동으로 실패하도록 설정.
```



## 주로 쓰이는 상황

```java
1. **마이크로서비스 아키텍처**
: 마이크로서비스 간의 통신에 gRPC를 사용하면 높은 성능과 간편한 서비스 정의. 
프로토콜 버퍼를 사용한 데이터 직렬화는 네트워크 오버헤드를 최소화, 
각 마이크로서비스는 서로 다른 언어로 개발 O.

2. **다양한 플랫폼 간의 통신**
: gRPC는 여러 가지 언어와 플랫폼을 지원 
ex) 모바일 애플리케이션과 서버 간의 통신, 다양한 서버 간의 통신에 적합.

3. **스트리밍**
: HTTP/2 기반 
gRPC는 서버-클라이언트, 클라이언트-서버, 양방향 스트리밍을 지원. 
실시간 업데이트나 대량의 데이터 전송.

4. **효율적인 데이터 전송**
: 프로토콜 버퍼는 바이너리 형태의 직렬화를 제공하여 데이터 전송 효율적. 
네트워크 대역폭을 최소화
빠른 데이터 전송을 가능.

5. **선언적 서비스 정의**
: gRPC를 사용하면 `.proto` 파일을 통해 서비스와 메시지를 선언적으로 정의. 
이를 통해 API 문서화, 클라이언트 및 서버 코드 생성 등의 작업을 자동화.

6. **통신의 신뢰성**
:gRPC는 데드라인, 타임아웃, 취소, 흐름 제어, 오류 처리 등의 기능을 통해 신뢰성 있는 통신 지원.

7. **기존 시스템과의 통합**
: 여러 기업들은 REST API와 함께 gRPC를 사용하여 성능이 중요한 경로에 gRPC를, 
나머지 부분에는 REST를 사용하는 방식으로 기존 시스템과 통합하기도 함.
```

cf) 브라우저에서 직접 웹 API를 호출해야 하는 경우, RESTful API를 사용하는 것이 더 적합할 수 있습니다.







## gRPC vs REST

|                        | **gRPC API**                                                 | **REST API**                                                 |
| ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 무엇인가요?            | 원격 프로시저 호출(RPC) 클라이언트-서버 통신 모델을 기반으로 API를 만들고 사용하는 시스템입니다. | 클라이언트와 서버 간의 정형 데이터 교환을 정의하는 일련의 규칙입니다. |
| 설계 접근 방식         | 서비스 지향 설계. 클라이언트는 서버에 서버 리소스에 영향을 줄 수도 있고 아닐 수도 있는 서비스 또는 기능을 수행해 줄 것을 요청합니다. | 엔터티 지향 설계. 클라이언트에서 서버에 리소스의 생성, 공유 또는 수정을 요청합니다. |
| 통신 모델              | 단방향, 단일 서버-다중 클라이언트, 단일 클라이언트-다중 서버, 다중 클라이언트-다중 서버 등 다양한 옵션이 있습니다. | 단방향. 단일 클라이언트가 단일 서버와 통신합니다.            |
| 구현                   | 작동하려면 클라이언트 측과 서버 측 모두에 gRPC 소프트웨어가 필요합니다. | 공통 소프트웨어 없이 클라이언트 측과 서버 측에서 다양한 형식으로 구현할 수 있습니다. |
| 데이터 액세스          | 서비스(기능) 직접 호출                                       | 리소스를 정의하는 URL 형태의 여러 엔드포인트                 |
| 반환된 데이터          | Protocol Buffer 파일에 정의된 서비스의 고정된 반환 유형으로 반환됩니다. | 서버에서 정의하는 고정 구조(일반적으로 JSON)로 반환됩니다.   |
| 클라이언트-서버 커플링 | 긴밀하게 결합됩니다. 클라이언트와 서버 모두에 데이터 형식을 정의하는 동일한 Protocol Buffer 파일이 필요합니다. | 느슨하게 결합됩니다. 클라이언트와 서버는 내부 세부 정보를 인식하지 못합니다. |
| 자동 코드 생성         | 기본 제공 기능                                               | 서드 파티 도구가 필요합니다.                                 |
| 양방향 스트리밍        | 있음                                                         | 없음                                                         |
| 가장 적합한 용도       | 고성능 또는 데이터 사용량이 많은 마이크로서비스 아키텍처     | 리소스가 잘 정의되어 있는 단순한 데이터 소스 / 웹기반 아키텍처 / 간단한 데이터 통신 |







참고자료)



https://aws.amazon.com/ko/compare/the-difference-between-grpc-and-rest/
